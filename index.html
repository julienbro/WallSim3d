<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulateur de Construction 3D</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/TransformControls.js"></script>
</head>
<body>
    <div id="custom-alert-box" class="custom-alert"></div>

    <div class="top-bar">
        <nav class="menu-bar">
            <ul>
                <li>Fichier
                    <ul>
                        <li id="file-new">Nouveau</li>
                        <li id="file-open">Ouvrir (Non implémenté)</li>
                        <li id="file-save">Enregistrer (Non implémenté)</li>
                        <li id="file-export-pdf">Exporter en PDF</li>
                    </ul>
                </li>
                <li>Édition
                    <ul>
                        <li id="edit-undo">Annuler (Non implémenté)</li>
                        <li id="edit-redo">Rétablir (Non implémenté)</li>
                    </ul>
                </li>
                <li>Style
                    <ul>
                        <li id="style-elements-white">Éléments en blanc</li>
                        <li id="style-elements-color">Éléments en couleur</li>
                        <li id="style-toggle-shadows">Ombres (Non implémenté)</li>
                    </ul>
                </li>
                <li>Aide
                    <ul>
                        <li id="help-about">À propos</li>
                        <li id="help-docs">Aide (Non implémenté)</li>
                    </ul>
                </li>
            </ul>
        </nav>

        <div class="toolbar">
            <button id="btn-select" title="Sélectionner (S)">S</button>
            <button id="btn-add" title="Ajouter (A)">A</button>
            <button id="btn-move" title="Déplacer (M)">M</button>
            <button id="btn-rotate" title="Pivoter (R)">R</button>
            <button id="btn-duplicate" title="Dupliquer (D)">D</button>
            <button id="btn-delete" title="Supprimer (Suppr)">Suppr</button>
            <select id="element-type-select"></select>
        </div>
    </div>

    <div class="main-container">
        <button class="sidebar-toggle" id="toggle-left-sidebar" title="Basculer barre latérale gauche">&lt;</button>
        <div class="left-sidebar" id="left-sidebar">
            <h3 style="color:#1abc9c; margin-top:0;">Outils</h3>
            <div class="form-group">
                <label for="custom-width">Largeur personnalisée (cm):</label>
                <input type="number" id="custom-width" value="20" min="1">
            </div>
            <div class="form-group">
                <label for="custom-height">Hauteur personnalisée (cm):</label>
                <input type="number" id="custom-height" value="10" min="1">
            </div>
            <div class="form-group">
                <label for="custom-depth">Profondeur personnalisée (cm):</label>
                <input type="number" id="custom-depth" value="10" min="1">
            </div>
            <div class="form-group">
                <label for="custom-name">Nom personnalisé:</label>
                <input type="text" id="custom-name" value="Bloc Perso">
            </div>
            <button id="btn-add-custom" style="background-color: #1abc9c; color:white; width:100%; padding:10px;">Ajouter élément personnalisé</button>

            <h4 style="color:#1abc9c; margin-top:20px;">Gestion des Assises</h4>
            <div class="form-group">
                <label for="assise-level">Niveau d'assise (Y cm):</label>
                <input type="number" id="assise-level" value="0" step="1">
            </div>
            <button id="btn-go-to-assise" style="width:100%; padding:8px;">Aller à l'assise</button>
            <p style="font-size:0.85em; color:#bdc3c7;">Prochain élément sera placé à cette hauteur Y.</p>
        </div>

        <div class="viewport-container">
            <canvas id="three-canvas"></canvas>
            <div class="watermark">SimulateurMur3D</div>
            <div class="dpad-controls">
                <button id="dpad-rot-left" title="Rotation Gauche (Q)">↺</button>
                <button id="dpad-el-up" title="Élément Haut (PageUp)">Y ▲</button>
                <button id="dpad-rot-right" title="Rotation Droite (E)">↻</button>

                <button id="dpad-el-left" title="Élément Gauche (Flèche gauche)">X ◄</button>
                <button id="dpad-ok" title="Confirmer (Entrée)">OK</button>
                <button id="dpad-el-right" title="Élément Droite (Flèche droite)">► X</button>

                <button id="dpad-el-backward" title="Élément Arrière (Flèche bas)">Z ▼</button>
                <button id="dpad-el-down" title="Élément Bas (PageDown)">Y ▼</button>
                <button id="dpad-el-forward" title="Élément Avant (Flèche haut)">Z ▲</button>
            </div>
        </div>

        <button class="sidebar-toggle" id="toggle-right-sidebar" title="Basculer barre latérale droite">&gt;</button>
        <div class="right-sidebar" id="right-sidebar">
            <h3 style="color:#1abc9c; margin-top:0;">Métadonnées</h3>
            <div class="form-group">
                <label for="meta-title">Titre de l'ouvrage:</label>
                <input type="text" id="meta-title" value="Mon Mur">
            </div>
            <div class="form-group">
                <label for="meta-drafter">Dessinateur:</label>
                <input type="text" id="meta-drafter" value="Utilisateur">
            </div>
            <div class="form-group">
                <label for="meta-mode">Mode opératoire:</label>
                <textarea id="meta-mode">Placer les éléments sur la grille.</textarea>
            </div>

            <div class="element-counter-container">
                <h4>Compteur d'éléments</h4>
                <table id="element-counter-table">
                    <thead>
                        <tr><th>Type</th><th>Quantité</th></tr>
                    </thead>
                    <tbody>
                        </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
