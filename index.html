<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mur Simulateur 3D (Gestion Assises + DPad Vertical)</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.163.0/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.163.0/examples/jsm/"
            }
        }
    </script>
</head>
<body>
    <div id="top-bar">
        <button id="file-menu">Fichier</button>
        <button id="edit-menu">Édition</button>
        <button id="view-menu">Vue</button>
        <button id="tools-menu">Outils</button>
        <button id="help-menu">Aide</button>
    </div>
    <div id="toolbar">
        <button id="tool-select" class="icon-select active" title="Sélectionner / Naviguer (S)"></button>
        <button id="tool-add" class="icon-add" title="Ajouter Élément (A)"></button>
        <button id="tool-move" class="icon-move disabled" title="Déplacer Élément (M)"></button>
        <button id="tool-rotate" class="icon-rotate disabled" title="Rotation Sélection 45° (R)"></button>
        <button id="tool-duplicate" class="icon-duplicate disabled" title="Dupliquer Élément (D)"></button>
         <button id="tool-delete" class="icon-delete disabled" title="Supprimer Sélection (Suppr)"></button>

        <div class="toolbar-group">
            <label for="element-select">Élément:</label>
            <select id="element-select"></select>
            <label for="joint-thickness">Joint(cm):</label>
            <input type="number" id="joint-thickness" value="1.2" step="0.1" min="0">
        </div>

        <div class="toolbar-group">
             <label for="assise-select">Assise:</label>
             <select id="assise-select"></select>
             <button id="btn-create-assise" title="Créer Assise à partir de l'élément sélectionné">➕ Assise</button>
        </div>

        <div id="custom-element-group">
            <label for="custom-name">Nom:</label> <input type="text" id="custom-name" value="Perso">
            <label for="custom-width">L(cm):</label> <input type="number" id="custom-width" value="20" step="0.1" min="0.1">
            <label for="custom-height">H(cm):</label> <input type="number" id="custom-height" value="10" step="0.1" min="0.1">
            <label for="custom-depth">P(cm):</label> <input type="number" id="custom-depth" value="10" step="0.1" min="0.1">
        </div>

        <div class="toolbar-group">
             <button id="btn-orbit-left" class="icon-orbit-left" title="Orbite Gauche (←)"></button>
             <button id="btn-orbit-right" class="icon-orbit-right" title="Orbite Droite (→)"></button>
             <button id="btn-zoom-in" class="icon-zoom-in" title="Zoom Avant (+)"></button>
             <button id="btn-zoom-out" class="icon-zoom-out" title="Zoom Arrière (-)"></button>
        </div>
        <span class="info-text">Mode: Sélection / Navigation</span>
    </div>

    <div id="viewport-container">
         <div id="watermark">MurSimulateur3D v.0.0.1 par J.Brohez</div>
         <div id="placement-controls">
             <div id="dpad-container">
                 <div id="placement-rotation">
                     <button id="placement-rotate-left" class="icon-rotate-left" title="Rotation Gauche 45° (Q)"></button>
                     <button id="placement-rotate-right" class="icon-rotate-right" title="Rotation Droite 45° (E)"></button>
                 </div>
                 <div id="dpad">
                     <button id="dpad-up" title="Avancer (Z-)">▲</button>
                     <button id="dpad-left" title="Gauche (X-)">◀</button>
                     <button id="dpad-right" title="Droite (X+)">▶</button>
                     <button id="dpad-down" title="Reculer (Z+)">▼</button>
                 </div>
                 <div id="placement-vertical">
                      <button id="dpad-up-y" class="icon-dpad-up" title="Monter (Y+/PgUp)"></button>
                      <button id="dpad-down-y" class="icon-dpad-down" title="Descendre (Y-/PgDn)"></button>
                 </div>
             </div>
             <div id="placement-actions">
                 <button id="btn-place-element" class="icon-confirm" title="Placer Élément (Entrée)"></button>
                 <button id="btn-confirm-move" class="icon-confirm" title="Confirmer Déplacement (Entrée)"></button>
                 <button id="btn-cancel-placement" class="icon-cancel" title="Annuler Placement (Échap)"></button>
                 <button id="btn-cancel-move" class="icon-cancel" title="Annuler Déplacement (Échap)"></button>
             </div>
         </div>
         <div id="context-menu">
             <button id="ctx-rotate"><span class="icon ctx-icon-rotate"></span>Rotation 45°</button>
             <button id="ctx-move"><span class="icon ctx-icon-move"></span>Déplacer</button>
             <button id="ctx-duplicate"><span class="icon ctx-icon-duplicate"></span>Dupliquer</button>
             <button id="ctx-delete"><span class="icon ctx-icon-delete"></span>Supprimer</button>
         </div>
    </div>
    <script type="module" src="app.js"></script>
</body>
</html>
